<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - Selaria Campo do Gado</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
body{font-family:'Poppins',sans-serif;background:#f4f4f4;color:#2b1d12;padding:20px;}
.container{max-width:500px;margin:50px auto;background:#fff;padding:25px;border-radius:12px;box-shadow:0 0 15px rgba(0,0,0,0.1);}
h1{text-align:center;color:#8b6b3f;margin-bottom:25px;}
label{display:block;margin-bottom:5px;font-weight:600;}
input, select{width:100%;padding:10px;margin-bottom:15px;border-radius:8px;border:1px solid #ccc;}
button{background:linear-gradient(135deg,#c9a46a,#8b6b3f);color:#fff;padding:12px 20px;border:none;border-radius:10px;font-weight:600;cursor:pointer;width:100%;}
button:hover{opacity:0.9;}
</style>
</head>
<body>

<div class="container">
<h1>Checkout</h1>
<form id="checkoutForm">
  <label for="nome">Nome:</label>
  <input type="text" id="nome" name="nome" required>

  <label for="telefone">Telefone/WhatsApp:</label>
  <input type="tel" id="telefone" name="telefone" required>

  <label for="produto">Produto:</label>
  <select id="produto" name="produto" required>
    <option value="">Selecione o produto</option>
  </select>

  <label for="quantidade">Quantidade:</label>
  <input type="number" id="quantidade" name="quantidade" min="1" value="1" required>

  <button type="submit">Finalizar Compra</button>
</form>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzGHCH4LtN3OdvSmyWp-EUYgVvrlqcGqdNAJSHHgHt0cNwlXvPRpIqKZya44LSefVuJ/exec";
const produtoSelect = document.getElementById("produto");

fetch(API_URL)
  .then(res => res.json())
  .then(data => {
    data.filter(p => p.Status === "ATIVO").forEach(p => {
      const option = document.createElement("option");
      option.value = p["Nome do Produto"];
      option.textContent = `${p["Nome do Produto"]} - R$ ${p["Preço (R$)"]}`;
      produtoSelect.appendChild(option);
    });
  })
  .catch(err => console.error(err));

document.getElementById("checkoutForm").addEventListener("submit", function(e){
  e.preventDefault();
  const nome = document.getElementById("nome").value;
  const telefone = document.getElementById("telefone").value;
  const produto = document.getElementById("produto").value;
  const quantidade = document.getElementById("quantidade").value;

  const mensagem = `Olá! Gostaria de comprar:\nProduto: ${produto}\nQuantidade: ${quantidade}\nNome: ${nome}\nTelefone: ${telefone}`;
  const whatsappURL = `https://wa.me/5575999975656?text=${encodeURIComponent(mensagem)}`;
  window.open(whatsappURL, "_blank");
});
</script>

</body>
</html>
